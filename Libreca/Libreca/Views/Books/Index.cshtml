@model List<Libreca.Models.Book>

@{
    ViewData["Title"] = "Books";
}

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<style>
    body {
        background-color: #f9f9f9; /* Color de fondo claro */
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 20px;
    }

    .container {
        max-width: 1200px;
        margin: auto;
    }

    .card {
        border-radius: 12px;
        overflow: hidden;
        border: none;
        box-shadow: 0 4px 8px #ffffff;
        margin-bottom: 20px;
    }

    .card-header {
        background-color: #e6c5f2; /* Color pastel suave */
        color: #4a2c77; /* Color de texto oscuro para contraste */
        text-align: center;
        padding: 15px;
        font-size: 22px;
        font-weight: bold;
    }

    .card-body {
        background-color: #ffffff;
        padding: 25px;
    }

    .form-group label {
        color: #4a2c77; /* Color de etiqueta en pastel */
        font-weight: bold;
    }

    .form-control {
        border-radius: 25px;
        border: 1px solid #d0a3f2; /* Borde pastel suave */
        box-shadow: inset 0 1px 2px #4a2c77zzr;
    }

    .btn-primary {
        background-color: #c4a5e2; /* Color pastel suave para botones */
        border-color: #c4a5e2;
        border-radius: 25px;
        color: #ffffff;
    }

        .btn-primary:hover {
            background-color: #4a2c77; /* Color pastel más oscuro para hover */
            border-color: #b093d7;
        }

    .badge-success {
        background-color: #a2d9a2; /* Verde pastel */
    }

    .badge-danger {
        background-color: #f2a2a2; /* Rojo pastel */
    }

    .alert-info {
        background-color: #d9e2f2; /* Color pastel para alertas */
        color: #4a2c77;
        border-radius: 12px;
    }

    .color-table {
        background-color: #ffffff; /* Color pastel suave para encabezado de tabla */
        color: #4a2c77;
    }

    /* Nuevos estilos para los bordes de la tabla */
    table {
        border-collapse: separate;
        border-spacing: 0;
        border: 1px solid #c4a5e2; /* Color del borde de la tabla */
    }

    th, td {
        border: 1px solid #c4a5e2; /* Color del borde de las celdas */
    }
</style>

<div class="container mt-4">
    <h2 class="text-center mb-4">@ViewData["Title"]</h2>

    <div class="card shadow-sm mt-4">
        <div class="card-body">
            <!-- Search Form -->
            <form asp-action="Search" method="post" class="form-inline justify-content-center">
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="query" name="query" placeholder="Search for books" />
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-primary">Search</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Books Table -->
    @if (Model != null && Model.Count > 0)
    {
        <div class="card shadow-sm mt-4">
            <div class="card-body">
                <h3 class="card-title text-center">Available Books</h3>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="color-table">
                            <tr>
                                <th>Title</th>
                                <th>Author</th>
                                <th>Genre</th>
                                <th>Available</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var book in Model)
                            {
                                <tr>
                                    <td>@book.Title</td>
                                    <td>@book.Author</td>
                                    <td>@book.Genre</td>
                                    <td>
                                        <span class="badge @(book.Available ? "badge-success" : "badge-danger")">
                                            @(book.Available ? "Yes" : "No")
                                        </span>
                                    </td>
                                    <td>
                                        @if (book.Available)
                                        {
                                            <form asp-action="Loan" method="post" class="d-inline">
                                                <input type="hidden" name="BookId" value="@book.Id" />
                                                <input type="hidden" name="User" value="@User.Identity.Name" />
                                                <button type="submit" class="btn btn-success btn-sm">Rent</button>
                                            </form>
                                        }
                                        else
                                        {
                                            <form asp-action="Return" method="post" class="d-inline">
                                                <input type="hidden" name="BookId" value="@book.Id" />
                                                <button type="submit" class="btn btn-warning btn-sm">Return</button>
                                            </form>
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-info mt-4 text-center">
            No books available.
        </div>
    }
</div>
